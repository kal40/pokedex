let pokemonRepository=function(){let e=[],t=function(t){"object"==typeof t&&"name"in t?e.push(t):console.error("Pokemon object is not correct.")},n=function(e,t){let n=document.createElement("div");n.classList.add("card","text-bg-dark","text-center"),n.setAttribute("id",`${e.name}-card`);let i=document.createElement("img");i.classList.add("card-img-top"),i.setAttribute("src",e.imgFrontUrl),i.setAttribute("alt",`${e.name} profile picture`);let r=document.createElement("div");r.classList.add("card-body");let o=document.createElement("h5");o.classList.add("card-title"),o.innerText=e.name;let a=document.createElement("a");a.classList.add("btn","btn-outline-success"),a.setAttribute("href","#"),a.setAttribute("data-bs-toggle","modal"),a.setAttribute("data-bs-target","#pokemon-modal"),a.setAttribute("data-bs-modalPokemonIndex",t),a.innerText="More Details";let l=document.querySelector(".pokemon-list");r.appendChild(o),r.appendChild(a),n.appendChild(i),n.appendChild(r),l.appendChild(n)},i=function(){return e},r=function(){return s(),fetch("https://pokeapi.co/api/v2/pokemon/?limit=99").then(function(e){return e.json()}).then(function(e){for(let n of e.results){let i={name:w(n.name),detailUrl:n.url};t(i)}}).then(async function(){for(let t of e)await fetch(t.detailUrl).then(function(e){return e.json()}).then(function(e){t.imgFrontUrl=e.sprites.front_default}).catch(function(e){console.error(`Oh, something went wrong: ${e}`)});c()}).catch(function(e){console.error(`Something went wrong: ${e}`),c()})},o=function(e){return s(),fetch(e.detailUrl).then(function(e){return e.json()}).then(function(t){e.imgBackUrl=t.sprites.back_default,e.height=t.height,e.types=t.types,e.abilities=t.abilities}).catch(function(e){console.error(`Oh, something went wrong: ${e}`),c()})},a=function(e){let t="";return e.types.forEach(function(e,n){n>0?t+=`, ${e.type.name}`:t+=e.type.name}),t},l=function(e){let t="";return e.abilities.forEach(function(e,n){n>0?t+=`, ${e.ability.name}`:t+=e.ability.name}),t};function s(){document.querySelector(".loader").classList.remove("hidden")}function c(){document.querySelector(".loader").classList.add("hidden")}document.querySelector("input[type='search']").addEventListener("search",function t(n){var i;let r=n.target.value.toLowerCase();i=e.filter(e=>e.name.toLowerCase().includes(r)),e.forEach(function(e){i.includes(e)?document.querySelector(`#${e.name}-card`).classList.remove("hidden"):document.querySelector(`#${e.name}-card`).classList.add("hidden")})});let d=function(){setTimeout(()=>{navigator.onLine||m("There is no internet connection","danger")},5e3)},u=function(){let e=bootstrap.Alert.getOrCreateInstance("#alert");e.close()};window.addEventListener("offline",d),window.addEventListener("online",u);let h=document.querySelector(".liveAlertPlaceholder .row"),m=(e,t)=>{let n=document.createElement("div");n.innerHTML=`<div class="alert alert-${t} d-flex align-items-center alert-dismissible fade show" id="alert" role="alert"><svg
          xmlns="http://www.w3.org/2000/svg"
          width="16"
          height="16"
          fill="currentColor"
          class="bi bi-exclamation-triangle-fill flex-shrink-0 me-2"
          viewBox="0 0 16 16"
        >
          <path
            d="M8.982 1.566a1.13 1.13 0 0 0-1.96 0L.165 13.233c-.457.778.091 1.767.98 1.767h13.713c.889 0 1.438-.99.98-1.767L8.982 1.566zM8 5c.535 0 .954.462.9.995l-.35 3.507a.552.552 0 0 1-1.1 0L7.1 5.995A.905.905 0 0 1 8 5zm.002 6a1 1 0 1 1 0 2 1 1 0 0 1 0-2z"
          />
      </svg>   <div>${e}</div>   <button type="button" class="btn-close" data-bs-dismiss="alert" aria-label="Close"></button></div>`,h.append(n)},f=document.querySelector(".modal-content"),p=0,$=0,g=0,b=0;function _(e,t,n,i){let r=n-e,o=i-t;return Math.abs(r)>Math.abs(o)?r>0?"right":"left":Math.abs(r)<Math.abs(o)?o>0?"down":"up":"tap"}f.addEventListener("touchstart",function(e){p=e.changedTouches[0].screenX,$=e.changedTouches[0].screenY},!1),f.addEventListener("touchend",function(t){"right"==_(p,$,g=t.changedTouches[0].screenX,b=t.changedTouches[0].screenY)&&L<99&&o(e[L+=1]).then(v),"left"==_(p,$,g,b)&&L>1&&o(e[L-=1]).then(v)},!1);let v=function(){let t=y.querySelector(".modal-title"),n=y.querySelector(".modal-body");t.innerText=e[L].name,n.innerHTML=`
      <div class="container-fluid">
        <div class="row row-cols-auto justify-content-center">
          <div class="col-5">
            <img src="${e[L].imgFrontUrl}" alt="${e[L].name}" width=100%>
          </div>
          <div class="col-5">
            <img src="${e[L].imgBackUrl}"  alt="${e[L].name}"  width=100%>
          </div>
        </div>
        <div class="row">
          <div class="col">
            <p>Height: ${e[L].height}</p>
            <p>Types: ${a(e[L])}</p>
            <p>Abilities: ${l(e[L])}</p>
            </div>
        </div>
      </div>
        `,c()},y=document.getElementById("pokemon-modal"),L=0;function w(e){return e.charAt(0).toUpperCase()+e.slice(1)}return y.addEventListener("show.bs.modal",t=>{let n=t.relatedTarget;o(e[L=n.getAttribute("data-bs-modalPokemonIndex")]).then(v)}),y.addEventListener("hidden.bs.modal",()=>{let e=y.querySelector(".modal-title"),t=y.querySelector(".modal-body");e.innerText="",t.innerHTML=""}),{add:t,addListItem:n,loadList:r,getAll:i}}();pokemonRepository.loadList().then(function(){pokemonRepository.getAll().forEach(function(e,t){pokemonRepository.addListItem(e,t)})});